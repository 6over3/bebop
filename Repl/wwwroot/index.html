<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap"
      rel="stylesheet"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Bebop REPL</title>
    <base href="./" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="Repl.styles.css" rel="stylesheet" />
    <script>
      window.assemblyName = "Repl";
      window.disableError = async (editorId)  =>{
        var editor = blazorMonaco.editors.find(x => x.id === editorId).editor;
        var model = await editor.getModel();
        // Clear the markers on the model by passing an empty array
        monaco.editor.setModelMarkers(model, "error", []);
      };
      window.clearMarkers = async (editorId) => {
        var editor = blazorMonaco.editors.find(x => x.id === editorId).editor;
        var model = await editor.getModel();
        monaco.editor.setModelMarkers(model,"bebop", []);
      }
      window.setMarkers = async (editorId, markers) => {
        var editor = blazorMonaco.editors.find(x => x.id === editorId).editor;
        var model = await editor.getModel();
        monaco.editor.setModelMarkers(model,"bebop", markers);
      };
      window.hasExampleParam = function () {
        var url_string = "http://www.example.com/t.html?a=1&b=3&c=m2-m3-m4-m5"; //window.location.href
        var url = new URL(window.location.href);
        var c = url.searchParams.get("example");
        return c == "1";
      };
      window.setExampleSchema = function () {
        const exampleSchema = window.DotNet.invokeMethod(
          assemblyName,
          "GetExampleSchema"
        );
        const schemaTextArea = document.getElementById("schema");
        schemaTextArea.value = exampleSchema;
      };
    </script>
  </head>

  <body>
    <div id="app">Loading...</div>
    <script src="_content/BlazorMonaco/jsInterop.js"></script>
    <script src="_content/BlazorMonaco/lib/monaco-editor/min/vs/loader.js"></script>
    <script src="_content/BlazorMonaco/lib/monaco-editor/min/vs/editor/editor.main.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
  </body>
</html>

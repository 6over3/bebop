//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:0.1.0.0
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using global::Bebop.Attributes;
using global::Bebop.Runtime;
//
// This source code was auto-generated by bebopc, Version=0.1.0.0.
//
namespace Gateway.Contracts {
    /// <summary>
    /// The current state of a user connection to a lobby
    /// </summary>
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public enum LobbyConnectionState : uint {
    Invalid = 0
  }
    /// <summary>
    /// Represents a message received by the gateway
    /// </summary>
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public abstract class BaseGatewayMessage {
    public const uint OpCode = 0x45544147;
        /// <summary>
        /// The opcode of the child message
        /// </summary>
    public uint ChildOpcode { get; init; }
        /// <summary>
        /// A bebop encoded message
        /// </summary>
    public byte[] Buffer { get; init; }
  }

  /// <inheritdoc />
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public sealed class GatewayMessage : BaseGatewayMessage {
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static byte[] Encode(BaseGatewayMessage record) {
      var writer = BebopWriter.Create();
      EncodeInto(record, ref writer);
      return writer.ToArray();
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public byte[] Encode() {
      var writer = BebopWriter.Create();
      EncodeInto(this, ref writer);
      return writer.ToArray();
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static void EncodeInto(BaseGatewayMessage record, ref BebopWriter writer) {
      writer.WriteUInt32(record.ChildOpcode);
      writer.WriteBytes(record.Buffer);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static T DecodeAs<T>(byte[] record) where T : BaseGatewayMessage, new() {
      var reader = BebopReader.From(record);
      return DecodeFrom<T>(ref reader);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static GatewayMessage Decode(byte[] record) {
      var reader = BebopReader.From(record);
      return DecodeFrom(ref reader);
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static GatewayMessage DecodeFrom(ref BebopReader reader) {
      uint field0;
      field0 = reader.ReadUInt32();
      byte[] field1;
      field1 = reader.ReadBytes();
      return new GatewayMessage {
        ChildOpcode = field0,
        Buffer = field1,
      };
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static T DecodeFrom<T>(ref BebopReader reader) where T: BaseGatewayMessage, new() {
      uint field0;
      field0 = reader.ReadUInt32();
      byte[] field1;
      field1 = reader.ReadBytes();
      return new T {
        ChildOpcode = field0,
        Buffer = field1,
      };
    }
  }
    /// <summary>
    /// A structure which represents an incoming chat message sent by a user
    /// </summary>
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public abstract class BaseChatMessage {
    public const uint OpCode = 0x54414843;
        /// <summary>
        /// the time at which the message was sent to the gateway
        /// </summary>
    public System.DateTime SendTime { get; init; }
        /// <summary>
        /// the GUID of the lobby the message should be forwarded to
        /// </summary>
    public System.Guid LobbyId { get; init; }
        /// <summary>
        /// the contents of the chat message
        /// </summary>
    public string Content { get; init; }
  }

  /// <inheritdoc />
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public sealed class ChatMessage : BaseChatMessage {
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static byte[] Encode(BaseChatMessage record) {
      var writer = BebopWriter.Create();
      EncodeInto(record, ref writer);
      return writer.ToArray();
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public byte[] Encode() {
      var writer = BebopWriter.Create();
      EncodeInto(this, ref writer);
      return writer.ToArray();
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static void EncodeInto(BaseChatMessage record, ref BebopWriter writer) {
      writer.WriteDate(record.SendTime);
      writer.WriteGuid(record.LobbyId);
      writer.WriteString(record.Content);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static T DecodeAs<T>(byte[] record) where T : BaseChatMessage, new() {
      var reader = BebopReader.From(record);
      return DecodeFrom<T>(ref reader);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static ChatMessage Decode(byte[] record) {
      var reader = BebopReader.From(record);
      return DecodeFrom(ref reader);
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static ChatMessage DecodeFrom(ref BebopReader reader) {
      System.DateTime field0;
      field0 = reader.ReadDate();
      System.Guid field1;
      field1 = reader.ReadGuid();
      string field2;
      field2 = reader.ReadString();
      return new ChatMessage {
        SendTime = field0,
        LobbyId = field1,
        Content = field2,
      };
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static T DecodeFrom<T>(ref BebopReader reader) where T: BaseChatMessage, new() {
      System.DateTime field0;
      field0 = reader.ReadDate();
      System.Guid field1;
      field1 = reader.ReadGuid();
      string field2;
      field2 = reader.ReadString();
      return new T {
        SendTime = field0,
        LobbyId = field1,
        Content = field2,
      };
    }
  }
    /// <summary>
    /// A structure that represents a user connected to a lobby
    /// </summary>
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public abstract class BaseLobbyUser {
        /// <summary>
        /// the unique ID of the user
        /// </summary>
    public System.Guid Id { get; set; }
        /// <summary>
        /// the display name of the user  visible to other members of the lobby
        /// </summary>
    public string DisplayName { get; set; }
        /// <summary>
        /// the time at which the user joined the lobby
        /// </summary>
    public System.DateTime JoinTime { get; set; }
        /// <summary>
        /// the current state of the user in the lobby
        /// </summary>
    public LobbyConnectionState State { get; set; }
  }

  /// <inheritdoc />
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public sealed class LobbyUser : BaseLobbyUser {
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static byte[] Encode(BaseLobbyUser record) {
      var writer = BebopWriter.Create();
      EncodeInto(record, ref writer);
      return writer.ToArray();
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public byte[] Encode() {
      var writer = BebopWriter.Create();
      EncodeInto(this, ref writer);
      return writer.ToArray();
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static void EncodeInto(BaseLobbyUser record, ref BebopWriter writer) {
      writer.WriteGuid(record.Id);
      writer.WriteString(record.DisplayName);
      writer.WriteDate(record.JoinTime);
      writer.WriteEnum<LobbyConnectionState>(record.State);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static T DecodeAs<T>(byte[] record) where T : BaseLobbyUser, new() {
      var reader = BebopReader.From(record);
      return DecodeFrom<T>(ref reader);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static LobbyUser Decode(byte[] record) {
      var reader = BebopReader.From(record);
      return DecodeFrom(ref reader);
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static LobbyUser DecodeFrom(ref BebopReader reader) {
      System.Guid field0;
      field0 = reader.ReadGuid();
      string field1;
      field1 = reader.ReadString();
      System.DateTime field2;
      field2 = reader.ReadDate();
      LobbyConnectionState field3;
      field3 = reader.ReadEnum<LobbyConnectionState>();
      return new LobbyUser {
        Id = field0,
        DisplayName = field1,
        JoinTime = field2,
        State = field3,
      };
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static T DecodeFrom<T>(ref BebopReader reader) where T: BaseLobbyUser, new() {
      System.Guid field0;
      field0 = reader.ReadGuid();
      string field1;
      field1 = reader.ReadString();
      System.DateTime field2;
      field2 = reader.ReadDate();
      LobbyConnectionState field3;
      field3 = reader.ReadEnum<LobbyConnectionState>();
      return new T {
        Id = field0,
        DisplayName = field1,
        JoinTime = field2,
        State = field3,
      };
    }
  }
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public abstract class BaseLobby {
    public BaseLobbyUser[] Users { get; set; }
    public System.DateTime CreationTime { get; set; }
    public string DisplayName { get; set; }
  }

  /// <inheritdoc />
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public sealed class Lobby : BaseLobby {
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static byte[] Encode(BaseLobby record) {
      var writer = BebopWriter.Create();
      EncodeInto(record, ref writer);
      return writer.ToArray();
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public byte[] Encode() {
      var writer = BebopWriter.Create();
      EncodeInto(this, ref writer);
      return writer.ToArray();
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static void EncodeInto(BaseLobby record, ref BebopWriter writer) {
      {
        var length0 = unchecked((uint)record.Users.Length);
        writer.WriteUInt32(length0);
        for (var i0 = 0; i0 < length0; i0++) {
          Gateway.Contracts.LobbyUser.EncodeInto(record.Users[i0], ref writer);
        }
      }
      writer.WriteDate(record.CreationTime);
      writer.WriteString(record.DisplayName);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static T DecodeAs<T>(byte[] record) where T : BaseLobby, new() {
      var reader = BebopReader.From(record);
      return DecodeFrom<T>(ref reader);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static Lobby Decode(byte[] record) {
      var reader = BebopReader.From(record);
      return DecodeFrom(ref reader);
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static Lobby DecodeFrom(ref BebopReader reader) {
      BaseLobbyUser[] field0;
      {
        var length0 = unchecked((int)reader.ReadUInt32());
        field0 = new BaseLobbyUser[length0];
        for (var i0 = 0; i0 < length0; i0++) {
          BaseLobbyUser x0;
          x0 = Gateway.Contracts.LobbyUser.DecodeFrom(ref reader);
          field0[i0] = x0;
        }
      }
      System.DateTime field1;
      field1 = reader.ReadDate();
      string field2;
      field2 = reader.ReadString();
      return new Lobby {
        Users = field0,
        CreationTime = field1,
        DisplayName = field2,
      };
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static T DecodeFrom<T>(ref BebopReader reader) where T: BaseLobby, new() {
      BaseLobbyUser[] field0;
      {
        var length0 = unchecked((int)reader.ReadUInt32());
        field0 = new BaseLobbyUser[length0];
        for (var i0 = 0; i0 < length0; i0++) {
          BaseLobbyUser x0;
          x0 = Gateway.Contracts.LobbyUser.DecodeFrom(ref reader);
          field0[i0] = x0;
        }
      }
      System.DateTime field1;
      field1 = reader.ReadDate();
      string field2;
      field2 = reader.ReadString();
      return new T {
        Users = field0,
        CreationTime = field1,
        DisplayName = field2,
      };
    }
  }
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public abstract class BaseTestMessage {
    #nullable enable
    public BaseGatewayMessage? GateWayMessage { get; set; }
    public BaseChatMessage? ChatMessage { get; set; }
    public Example? ExampleEnum { get; set; }
    public BaseLobbyUser? User { get; set; }
    #nullable disable
  }

  /// <inheritdoc />
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public sealed class TestMessage : BaseTestMessage {
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static byte[] Encode(BaseTestMessage record) {
      var writer = BebopWriter.Create();
      EncodeInto(record, ref writer);
      return writer.ToArray();
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public byte[] Encode() {
      var writer = BebopWriter.Create();
      EncodeInto(this, ref writer);
      return writer.ToArray();
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static void EncodeInto(BaseTestMessage record, ref BebopWriter writer) {
      var pos = writer.ReserveRecordLength();
      var start = writer.Length;

      if (record.GateWayMessage is not null) {
        writer.WriteByte(1);
        Gateway.Contracts.GatewayMessage.EncodeInto(record.GateWayMessage, ref writer);
      }

      if (record.ChatMessage is not null) {
        writer.WriteByte(2);
        Gateway.Contracts.ChatMessage.EncodeInto(record.ChatMessage, ref writer);
      }

      if (record.ExampleEnum is not null) {
        writer.WriteByte(3);
        writer.WriteEnum<Example>(record.ExampleEnum.Value);
      }

      if (record.User is not null) {
        writer.WriteByte(4);
        Gateway.Contracts.LobbyUser.EncodeInto(record.User, ref writer);
      }
      writer.WriteByte(0);
      var end = writer.Length;
      writer.FillRecordLength(pos, unchecked((uint) unchecked(end - start)));
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static T DecodeAs<T>(byte[] record) where T : BaseTestMessage, new() {
      var reader = BebopReader.From(record);
      return DecodeFrom<T>(ref reader);
    }

    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    public static TestMessage Decode(byte[] record) {
      var reader = BebopReader.From(record);
      return DecodeFrom(ref reader);
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static TestMessage DecodeFrom(ref BebopReader reader) {
      var record = new TestMessage();
      var length = reader.ReadRecordLength();
      var end = unchecked((int) (reader.Position + length));
      while (true) {
        switch (reader.ReadByte()) {
          case 0:
            return record;
          case 1:
            record.GateWayMessage = Gateway.Contracts.GatewayMessage.DecodeFrom(ref reader);
            break;
          case 2:
            record.ChatMessage = Gateway.Contracts.ChatMessage.DecodeFrom(ref reader);
            break;
          case 3:
            record.ExampleEnum = reader.ReadEnum<Example>();
            break;
          case 4:
            record.User = Gateway.Contracts.LobbyUser.DecodeFrom(ref reader);
            break;
          default:
            reader.Position = end;
            return record;
        }
      }
    }
    [System.Runtime.CompilerServices.MethodImpl(BebopConstants.HotPath)]
    [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
    [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]
    internal static T DecodeFrom<T>(ref BebopReader reader) where T: BaseTestMessage, new() {
      var record = new T();
      var length = reader.ReadRecordLength();
      var end = unchecked((int) (reader.Position + length));
      while (true) {
        switch (reader.ReadByte()) {
          case 0:
            return record;
          case 1:
            record.GateWayMessage = Gateway.Contracts.GatewayMessage.DecodeFrom(ref reader);
            break;
          case 2:
            record.ChatMessage = Gateway.Contracts.ChatMessage.DecodeFrom(ref reader);
            break;
          case 3:
            record.ExampleEnum = reader.ReadEnum<Example>();
            break;
          case 4:
            record.User = Gateway.Contracts.LobbyUser.DecodeFrom(ref reader);
            break;
          default:
            reader.Position = end;
            return record;
        }
      }
    }
  }
    /// <summary>
    /// Hello World
    /// </summary>
  [System.CodeDom.Compiler.GeneratedCode("bebopc", "0.1.0.0")]
  [BebopRecord]
  public enum Example : uint {
    A = 0,
    B = 1,
    C = 2
  }
}
